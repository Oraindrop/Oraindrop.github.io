# 클린코드 (~ p)

## 오류 처리

- `Checked Exception 은 OCP 를 위반한다.`
    - 메서드에서 checked exception 을 던졌는데, catch 블록이 세 단계 위에 있다면 그 사이 메서드 모두가 선언부에 해당 exception 을 정의해야 한다.
    - 즉, 하위단계 코드 변경 시 상위 코드의 선언부를 전부 고쳐야 한다는 것.
    - 최하위 함수에서 checked exception 발생 시 최상위 단계까지 연쇄적인 수정이 필요.
    - throws 경로에 위치하는 모든 함수가 최하위 함수에서 던지는 예외를 알아야 하므로 `캡슐화가 깨진다.`
    - 때로는 (아주 위험한 에러라던가) checked exception 이 유용할 때가 있지만, 대부분의 경우 의존성이라는 비용이 이익보다 크다.

- 외부 API 의 exception 을 wrapper 로 다룬다.
    - 외부 API 호출 시 다양한 에러를 우리는 외부 API 에러 하나로 퉁치고 싶을 때,
    - 해당 API 를 wrapper 클래스를 만들어서, try-catch 로 다양한 에러를 우리가 정의한 에러로 throw 하는 것만으로도 코드가 훨씬 깨끗해진다.
    - 외부 API 가 설계한 방식에 발목을 잡히지 않고, 프로그램 사용에 편리한 API를 정의하면 그만이다.

- null return 의 최소화를 강조
    - Special case pattern
    - null 말고 기본 값을 return 할 수 있도록 class 정의해서 null return 을 피해보는 것이 유용할 경우도.

- parameter 로 null 을 넘기는 것은 아주 안좋다.
    - 인자로 넘어온 null 을 적절히 처리하는 방법이 없다.
    - 애초에 넘기지 못하도록 금지하는 정책이 합리적.

> 깨끗한 코드는 읽기도 좋아야 하지만 안정성도 높아야 한다. 이 둘은 상충하는 목표가 아니다.

## 경계

- 이 책에서 말하는 경계란, 외부 코드와 우리 코드의 경계이다. 즉, 외부코드를 다루는 방법에 대한 장이다.
- `학습 테스트`
    - 프로그램에서 사용하려는 방식대로 외부 API 를 호출하여, 통제된 환경에서 API 를 제대로 이해하는지 확인
    - 쉽게 말해서 쓰고싶은 방식대로 API 를 호출해보고, 막히는 것들을 하나 하나 확인해가며 단위테스트를 작성해 보는 과정으로 보인다.
    - API 에서 필요한 지식만 확보하는 손쉬운 방법.

- 통제하지 못하는 코드를 사용할 때는 너무 많은 투자를 하거나, 향후 변경 비용이 지나치게 커지지 않도록 각별히 주의해야 한다.
- 경계에 위치한 코드는 깔끔히 분리한다.
    - 또한 기대결과를 정의하는 테스트 케이스를 작성한다.
    - 외부 패키지를 세세히 분석할 필요는 없고, 외부 패키지에 의존하는 대신 통제가 가능한 우리코드에 의존하는 편이 훨씬 좋다.

> 새로운 클래스로 경계를 감싸거나 ADAPTER 패턴을 사용해 우리가 원하는 인터페이스를 패키지가 제공하는 인터페이스로 변환하자.

- *ADAPTER 패턴 은 구글링 등 찾아서 읽어보았는데 우리가 흔히 사용하는 인터페이스 활용방식과 크게 다르지 않은 것 같다.
    - 이 장의 핵심은 외부 코드의 변경이나 수정 시에 영향도를 최소화 하자는 데 있다.




## 형식 맞추기

- 코드 형식은 중요하다.
- 코드 형식은 의사소통의 일환이다.
- 신문 기사처럼 작성하라.
    - 위에서 부터 아래로, 최상단에는 표제
    - 세세한 사실은 숨기고 커다란 그림부터
    - 쭉 읽어 내려가면 세세한 사실이 조금씩 드러나도록
- 개념은 빈 행으로 분리하라.
- 반대로 밀접한 코드 행은 가까이에 놓여야 한다.

## 객체와 자료구조

- 이 6장은 어렵다... 잘 와닿지가 않는다.
- 모든 것이 객체라는 생각이 미신이다.
- 때로는 단순한 자료 구조와 절차적인 코드가 가장 적합한 상황도 있다.
- 객체 지향 코드에서 어려운 변경은 절차적인 코드에서 쉬우며, 절차적인 코드에서 어려운 변경은 객체지향 코드에서 쉽다.